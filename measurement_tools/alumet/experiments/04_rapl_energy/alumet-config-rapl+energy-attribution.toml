[plugins.csv]
output_path = "alumet-output-rapl+energy-attribution.csv"
force_flush = true
append_unit_to_metric_name = true
use_unit_display_name = true
csv_delimiter = ";"
csv_late_delimiter = ","

[plugins.rapl]
poll_interval = "20ms"
flush_interval = "2s"
no_perf_events = false

[plugins.procfs.kernel]
enabled = true
poll_interval = "20ms"

[plugins.procfs.memory]
enabled = true
poll_interval = "20ms"
metrics = [ "MemTotal", "MemFree", "MemAvailable", "Cached", "SwapCached", "Active", "Inactive", "Mapped",]

[plugins.procfs.processes]
enabled = true
refresh_interval = "20ms"
strategy = "event"
[[plugins.procfs.processes.groups]]
exe_regex = ""
poll_interval = "20ms"
flush_interval = "2s"

[plugins.procfs.processes.events]
poll_interval = "20ms"
flush_interval = "2s"

[plugins.energy-attribution.formulas.attributed_energy]
expr = "cpu_energy * cpu_usage / 100.0"
ref = "cpu_energy"

[plugins.energy-attribution.formulas.attributed_energy.per_resource.cpu_energy]
metric = "rapl_consumed_energy"
resource_kind = "local_machine"
domain = "package_total"

[plugins.energy-attribution.formulas.attributed_energy.per_consumer.cpu_usage]
metric = "cpu_percent"
kind = "total"
